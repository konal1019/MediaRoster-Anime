import{initSlideshow,initFlashcardHover,randomAnime,initGalleryControls}from"./components/initializer.7173126f.js";import{searchAnime,getTopRatedAnime,getMostPopularAnime,getAiringAnime,getSeasonalAnime,getGenres,genres,getAnimeInfo}from"./api.4d58ec19.js";import{createSection,escapeHTML}from"./components/UIs.76afe8ca.js";import{loadSearchPage}from"./components/search.f243f9af.js";import{reccomendedData}from"./components/data.dce95fde.js";export function loadPageContent(e){document.getElementById("randomDiv").style.display="none","home"===e?loadHomePage():"search"===e?loadSearchPage():"portfolio"===e?window.location.href="https://github.com/konal1019":load404()}let loaderTimeout;export function showLoader(){const e=document.getElementById("loader");e&&(clearTimeout(loaderTimeout),e.innerHTML='\n      <div class="loader"><div class="dot"></div><div class="dot"></div><div class="dot"></div></div>',e.style.display="flex",loaderTimeout=setTimeout(()=>{e.innerHTML+='<div class="loader-text">Looks like our servers are facing high traffic, please have patience.</div>'},1e4))}export function hideLoader(){const e=document.getElementById("loader");e&&(clearTimeout(loaderTimeout),e.innerHTML="",e.style.display="none")}export function loadCSS(e){if(!document.querySelector(`link[href="${e}"]`)){const n=document.createElement("link");n.href=e,n.rel="stylesheet",document.head.appendChild(n)}}export async function loadHomePage(){const e=window.location.hash;console.log("Loading Home Page"),document.getElementById("navhome").style.color="#8960ff",document.getElementById("navsearch").style.color="#ddd";const n=document.getElementById("content");showLoader();const a=`\n  <div class="slideshow-container">\n    ${reccomendedData.map((e,n)=>`\n      <div class="slide ${0===n?"active":""}" id="rec-${e.mal_id}" data-mal-id="${e.mal_id}">\n        <picture>\n          <source media="(min-width: 601px)" srcset="${e.images.PC_image}">\n          <img class="hero-background" src="${e.images.large_image}" alt="${e.title} background">\n        </picture>\n        <div class="slide-fade"></div> \n        <div class="slide-content">\n          <h2 class="slide-title">${e.title}</h2>\n          <p class="slide-description">${e.synopsis.substring(0,250)}...</p>\n          <div class="slide-details">\n            <span data-type="episodes"><i class="fas fa-play-circle"></i> ${e.episodes} Episodes</span>\n            <span data-type="score"><i class="fas fa-star"></i> ${e.score}</span>\n            <span data-type="members"><i class="fas fa-users"></i> ${e.members.toLocaleString()}</span>\n            <span data-type="rank"><i class="fas fa-trophy"></i> Rank: #${e.rank}</span>\n          </div>\n          <a href="./#/details-${e.mal_id}" class="slide-button">View Details</a>\n          <a href="${e.images.source}" style="width: 100px;" target="_blank" class="slide-source">Original image</a>\n        </div>\n      </div>\n    `).join("")}\n    <a class="prev"><</a>\n    <a class="next">></a>\n  </div>\n`;if(""!==e&&"#/"!==e)return;n.innerHTML=a;const t=[{title:"Top Rated Anime",apiFunction:getTopRatedAnime,cardType:"top-rated",containerClass:"top-rated-container",titleClass:"top-rated-title",galleryClass:"horizontal-gallery"},{title:"Most Popular Anime",apiFunction:getMostPopularAnime,cardType:"most-popular",containerClass:"top-rated-container",titleClass:"top-rated-title",galleryClass:"horizontal-gallery"},{title:"Currently Airing Anime",apiFunction:getAiringAnime,cardType:"airing",containerClass:"airing-container",titleClass:"airing-title",galleryClass:"gridGallery"},{title:"Anime This Season",apiFunction:getSeasonalAnime,cardType:"seasonal",containerClass:"airing-container",titleClass:"airing-title",galleryClass:"gridGallery"}];for(const e of t){if(""!==window.location.hash&&"#/"!==window.location.hash)return;const a=await createSection(e);""!==window.location.hash&&"#/"!==window.location.hash||n.insertAdjacentHTML("beforeend",a)}if(""===window.location.hash||"#/"===window.location.hash){document.getElementById("randomDiv").style.display="block",updateSlides(),hideLoader(),initSlideshow(),initFlashcardHover(),initGalleryControls(),randomAnime(),getGenres(),console.log("Home page loaded")}}async function updateSlides(){const e=document.querySelectorAll(".slide[data-mal-id]");for(const n of e){if(""!==window.location.hash&&"#/"!==window.location.hash)break;const e=n.dataset.malId;try{const a=await getAnimeInfo(e),t=a?.data;if(!t)continue;if(""!==window.location.hash&&"#/"!==window.location.hash)break;const o=t.episodes||"N/A",i=t.score||"N/A",s=(t.members||0).toLocaleString(),l=t.rank||"N/A",r=`<i class="fas fa-play-circle"></i> ${o} Episodes`,d=`<i class="fas fa-star"></i> ${i}`,c=`<i class="fas fa-users"></i> ${s}`,m=`<i class="fas fa-trophy"></i> Rank: #${l}`,p=n.querySelector('[data-type="episodes"]'),g=n.querySelector('[data-type="score"]'),h=n.querySelector('[data-type="members"]'),u=n.querySelector('[data-type="rank"]');p&&p.innerHTML.trim()!==r.trim()&&(p.innerHTML=r),g&&g.innerHTML.trim()!==d.trim()&&(g.innerHTML=d),h&&h.innerHTML.trim()!==c.trim()&&(h.innerHTML=c),u&&u.innerHTML.trim()!==m.trim()&&(u.innerHTML=m)}catch(e){console.warn("Failed to update slide details:",e)}}}export function load404(e){if(window.location.hash.substring(1)!==e)return;console.log("Loading 404 Page"),document.getElementById("navhome").style.color="#ddd",document.getElementById("navsearch").style.color="#ddd";const n=document.getElementById("content");hideLoader(),n.innerHTML=`\n    <div class="not-found-container">\n      <div class="not-found-text">404</div>\n      <h2>Oops! Page Not Found</h2>\n      <p>The page you're looking for at <code>${e}</code> doesn't exist.</p>\n      <p>Redirecting to homepage in <span id="countdown">5</span> seconds...</p>\n      <a href="./#/" class="btn-home">Back to Home</a>\n    </div>\n  `;let a=5;const t=document.getElementById("countdown"),o=setInterval(()=>{a--,t&&(t.textContent=a),a<=0&&(clearInterval(o),window.location.href="./#/")},1e3);window.addEventListener("hashchange",()=>clearInterval(o),{once:!0})}